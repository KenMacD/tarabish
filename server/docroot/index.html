<!doctype html>
<html><head>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"> </script>
  <script src="http://cdn.sockjs.org/sockjs-0.3.min.js"> </script>
</head><body lang="en">
  <h2>Tarabish Online</h2>

<form id="login">
	Name: <input id="login_name" type="text"/>
</form>

<script>

var sockjs_url = '/test';
var sockjs = new SockJS(sockjs_url);

sockjs.onopen = function() {
	sockjs.send("[1,2,3]");
};

function tcall(method, params) {
	return {"method": method, "params":params};
}

$('#login_name').focus();
$('#login').submit(function() {
	if (sockjs.readyState === SockJS.OPEN) {
		sockjs.send(JSON.stringify(tcall("login", [$('#login_name').val()])));
	}
	return false;
});
</script>

</body>
