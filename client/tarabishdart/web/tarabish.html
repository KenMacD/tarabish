<!DOCTYPE html>

<link rel="import" href="tarabish_login.html">
<link rel="import" href="the_table.html">

<polymer-element name="tarabish-app">
  <template>
    <p>Hello world from Dart!</p>
    <!--
    <p><button on-click="debug_sit()">Debug Login</button>
    <button on-click="debug_clone()">New Tab</button></p>
    -->

    <p>Login Input, you are {{loginName}}</p>
    <input type="text" value="{{newLoginName}}">
    <button on-click="{{doLogin}}">Login</button>
    <button on-click="{{doDisconnect}}">Disconnect</button>
-   <hr>

    <template if="{{showTables}}">
      <button on-click="{{refreshTables}}">Refresh Tables</button>
      <table>
        <thead>
          <tr><th>Id</th><th>Seat 1</th><th>Seat 2</th><th>Seat 3</th><th>Seat 4</th></tr>
        </thead>
        <template repeat="{{table in tableViews}}">
          <tr>
            <td>{{table.tableId}}</td>
            <td template repeat="{{seat in table.seats}}">
              <template if="{{seat.isOpen}}">
                <button on-click="{{sit}}" data-table="{{table.tableId}}" data-seat="{{seat.num)}}">Sit</button>
              </template>
              <template if="{{!seat.isOpen}}">
                {{seat.name}}
              </template>
            </td>
          </tr>
        </template>
      </table>
      <p>TABLES</p>
    </template>
    
    <!-- Show always for now, can't query if it's not there
         TODO: figure out if I can data-bind it
         <template if="{{showTable}}"> -->
      <canvas id="thetable" is="the-table"></canvas>
    <!-- </template> -->
    <button on-click="{{startGame}}">Start Game</button>
    <p>
    <input type="text" value="{{chatLine}}"><button on-click="{{sendChat}}">Send</button>
    <textarea rows="10" cols="80" value="{{table.chatText}}" disabled></textarea>
  </template>
  <script type="application/dart" src="tarabish.dart"></script>
</polymer-element>
